<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyByte - AI-Powered Learning Assistant</title>
    
    <!-- External Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    
    <!-- Custom Styles -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="{{ url_for('static', filename='img/studybyte-logo.webp') }}">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
            <div class="shape shape-5"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary-gradient sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#" onclick="showDashboard()">
                <img src="{{ url_for('static', filename='img/studybyte-logo.webp') }}" alt="StudyByte" height="32" class="me-2">
                StudyByte
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" onclick="showDashboard()">
                            <i class="fas fa-home me-2"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('mental-health')">
                            <i class="fas fa-heart me-2"></i>Mental Health
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('text-summarizer')">
                            <i class="fas fa-file-text me-2"></i>Text Summarizer
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('pdf-processor')">
                            <i class="fas fa-magic me-2"></i>Smart Notes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('video-processor')">
                            <i class="fas fa-video me-2"></i>Media Analysis
                        </a>
                    </li>
                </ul>
                
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-cog me-2"></i>Settings
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-bell me-2"></i>Notifications</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard -->
    <div id="dashboard" class="container-fluid py-5">
        <!-- Hero Section -->
        <div class="row justify-content-center text-center mb-5">
            <div class="col-lg-10">
                <div class="hero-content bg-white rounded-4 p-5 shadow-lg">
                    <div class="row align-items-center">
                        <div class="col-md-8 text-start">
                            <h1 class="display-5 fw-bold text-primary mb-3">
                                Welcome to StudyByte
                            </h1>
                            <p class="lead text-muted mb-4">
                                Your comprehensive AI-powered learning platform designed to enhance academic performance, provide mental health support, and streamline your study workflow.
                            </p>
                            <div class="d-flex flex-wrap justify-content-start gap-2">
                                <span class="badge bg-warning-soft px-3 py-2">Gemini AI Powered</span>
                                <span class="badge bg-success-soft px-3 py-2">Mental Health Support</span>
                                <span class="badge bg-primary-soft px-3 py-2">Smart Study Tools</span>
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <img src="{{ url_for('static', filename='img/studybyte-logo.webp') }}" alt="StudyByte" class="img-fluid" style="max-height: 120px;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feature Cards -->
        <div class="row justify-content-center g-4">
            <!-- Mental Health Card -->
            <div class="col-lg-4 col-md-6 animate__animated animate__fadeInLeft">
                <div class="feature-card h-100" onclick="showSection('mental-health')" data-tilt>
                    <div class="card-glow"></div>
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-4">
                            <div class="icon-wrapper bg-danger-gradient">
                                <i class="fas fa-heart fa-2x text-white"></i>
                            </div>
                        </div>
                        <h5 class="card-title fw-bold mb-3">Mental Health Support</h5>
                        <p class="card-text text-muted mb-4">
                            AI-powered chatbot using Gemini AI with advanced sentiment analysis for personalized emotional support.
                        </p>
                        <div class="feature-badges mb-3 d-flex justify-content-center flex-wrap gap-2">
                            <span class="badge bg-warning-soft">Gemini AI</span>
                            <span class="badge bg-success-soft">24/7 Support</span>
                        </div>
                        <div class="card-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Text Summarizer Card -->
            <div class="col-lg-4 col-md-6 animate__animated animate__fadeInUp animate__delay-1s">
                <div class="feature-card h-100" onclick="showSection('summarizer')" data-tilt>
                    <div class="card-glow"></div>
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-4">
                            <div class="icon-wrapper bg-success-gradient">
                                <i class="fas fa-video fa-2x text-white"></i>
                            </div>
                        </div>
                        <h5 class="card-title fw-bold mb-3">Video Summarizer</h5>
                        <p class="card-text text-muted mb-4">
                            Transform lecture videos, audio recordings, and text into intelligent summaries with AI speech-to-text.
                        </p>
                        <div class="feature-badges mb-3 d-flex justify-content-center flex-wrap gap-2">
                            <span class="badge bg-info-soft">Speech-to-Text</span>
                            <span class="badge bg-warning-soft">Gemini AI</span>
                        </div>
                        <div class="card-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PDF Processor Card -->
            <div class="col-lg-4 col-md-6 animate__animated animate__fadeInRight animate__delay-2s">
                <div class="feature-card h-100" onclick="showSection('pdf-processor')" data-tilt>
                    <div class="card-glow"></div>
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-4">
                            <div class="icon-wrapper bg-warning-gradient">
                                <i class="fas fa-magic fa-2x text-white"></i>
                            </div>
                        </div>
                        <h5 class="card-title fw-bold mb-3">Smart Text Summarizer</h5>
                        <p class="card-text text-muted mb-4">
                            Transform any text into structured study notes with key concepts, summaries, and important points.
                        </p>
                        <div class="feature-badges mb-3 d-flex justify-content-center flex-wrap gap-2">
                            <span class="badge bg-primary-soft">TextBlob AI</span>
                            <span class="badge bg-success-soft">Study Ready</span>
                        </div>
                        <div class="card-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <!-- Mental Health Section -->
    <div id="mental-health" class="feature-section">
        <div class="container-fluid py-4">
            <!-- Header -->
            <div class="section-header">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2 class="display-6 fw-bold text-success">
                            <i class="fas fa-leaf text-success me-3"></i>
                            Mental Health Support
                        </h2>
                        <p class="text-muted">AI-powered emotional wellness companion</p>
                    </div>
                    <button class="btn btn-outline-secondary btn-lg rounded-pill" onclick="showDashboard()">
                        <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                    </button>
                </div>
            </div>
            
            <!-- VS Code Style Layout -->
            <div class="row g-0 h-100">
                <!-- Chat Area (Left Side) -->
                <div class="col-lg-8">
                    <div class="chat-workspace h-100">
                        <div class="card border-0 shadow-lg h-100">
                            <div class="card-header bg-gradient text-white">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar me-3">
                                            <i class="fas fa-robot fa-lg"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-0">AI Wellness Companion</h6>
                                            <small class="opacity-75">Active conversation</small>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-sm btn-outline-light" onclick="clearChat()" title="Clear Chat">
                                            <i class="fas fa-broom"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-light" onclick="exportChat()" title="Export Chat">
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0 d-flex flex-column" style="height: 500px;">
                                <div id="chat-messages" class="chat-messages flex-grow-1">
                                    <div class="bot-message animate__animated animate__fadeInLeft">
                                        <div class="message-avatar">
                                            <i class="fas fa-leaf text-success"></i>
                                        </div>
                                        <div class="message-content">
                                            <strong>ðŸŒ¿ AI Companion:</strong> 
                                            Hi there! I'm here to support you on your wellness journey. How are you feeling today? ðŸ˜Š
                                        </div>
                                        <div class="message-time">Just now</div>
                                    </div>
                                </div>
                                <div class="card-footer border-0 bg-light">
                                    <div class="input-group input-group-lg">
                                        <input type="text" 
                                               id="chat-input" 
                                               class="form-control border-0 bg-white shadow-sm" 
                                               placeholder="Share your thoughts... (Press Enter to send)" 
                                               onkeypress="if(event.key==='Enter') sendMessage()">
                                        <button class="btn btn-primary px-4" onclick="sendMessage()">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar Panel (Right Side) -->
                <div class="col-lg-4">
                    <div class="sidebar-panel h-100">
                        <!-- Quick Actions Tab -->
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-light border-bottom">
                                <ul class="nav nav-tabs card-header-tabs" id="sidebarTabs">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-bs-toggle="tab" href="#history-tab">
                                            <i class="fas fa-history me-1"></i>History
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-bs-toggle="tab" href="#tasks-tab">
                                            <i class="fas fa-tasks me-1"></i>Tasks
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-bs-toggle="tab" href="#insights-tab">
                                            <i class="fas fa-chart-line me-1"></i>Insights
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-body p-3" style="height: 500px; overflow-y: auto;">
                                <div class="tab-content">
                                    <!-- Chat History Tab -->
                                    <div class="tab-pane fade show active" id="history-tab">
                                        <h6 class="text-muted mb-3">Recent Conversations</h6>
                                        <div class="chat-history-list" id="chat-history-container">
                                            <div class="text-center text-muted py-4">
                                                <i class="fas fa-history fa-2x mb-3 opacity-25"></i>
                                                <p class="small mb-0">No previous conversations yet.</p>
                                                <p class="small">Start chatting to see your history here!</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Quick Tasks Tab -->
                                    <div class="tab-pane fade" id="tasks-tab">
                                        <h6 class="text-muted mb-3">Quick Actions</h6>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-success btn-sm" onclick="quickPrompt('How can I manage exam stress?')">
                                                <i class="fas fa-graduation-cap me-2"></i>Exam Stress Help
                                            </button>
                                            <button class="btn btn-outline-info btn-sm" onclick="quickPrompt('I need motivation for studying')">
                                                <i class="fas fa-rocket me-2"></i>Study Motivation
                                            </button>
                                            <button class="btn btn-outline-warning btn-sm" onclick="quickPrompt('Help me with anxiety')">
                                                <i class="fas fa-heart me-2"></i>Anxiety Support
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm" onclick="quickPrompt('Daily wellness check-in')">
                                                <i class="fas fa-clipboard-check me-2"></i>Wellness Check
                                            </button>
                                        </div>
                                        <hr>
                                        <h6 class="text-muted mb-3">Switch Features</h6>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-secondary btn-sm" onclick="showSection('summarizer')">
                                                <i class="fas fa-file-text me-2"></i>Text Summarizer
                                            </button>
                                            <button class="btn btn-outline-secondary btn-sm" onclick="showSection('pdf-processor')">
                                                <i class="fas fa-magic me-2"></i>Text Summarizer
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Mood Insights Tab -->
                                    <div class="tab-pane fade" id="insights-tab">
                                        <h6 class="text-muted mb-3">Mood Analytics</h6>
                                        <div class="insights-container">
                                            <div class="insight-card p-3 mb-3 bg-light rounded">
                                                <div class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-smile text-success me-2"></i>
                                                    <strong>Current Mood</strong>
                                                </div>
                                                <div class="mood-indicator">
                                                    <div class="progress mb-2" style="height: 8px;">
                                                        <div class="progress-bar bg-success" style="width: 75%"></div>
                                                    </div>
                                                    <small class="text-muted">75% Positive</small>
                                                </div>
                                            </div>
                                            
                                            <div class="insight-card p-3 mb-3 bg-light rounded">
                                                <div class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-calendar-check text-info me-2"></i>
                                                    <strong>This Week</strong>
                                                </div>
                                                <small class="text-muted">3 positive conversations<br>2 support sessions completed</small>
                                            </div>
                                            
                                            <div class="insight-card p-3 mb-3 bg-light rounded">
                                                <div class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-lightbulb text-warning me-2"></i>
                                                    <strong>Suggestions</strong>
                                                </div>
                                                <small class="text-muted">
                                                    â€¢ Keep up the positive mindset<br>
                                                    â€¢ Try meditation before exams<br>
                                                    â€¢ Schedule regular check-ins
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video/Text Summarizer Section -->
    <div id="summarizer" class="feature-section">
        <div class="container-fluid py-4">
            <div class="section-header animate__animated animate__slideInDown">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2 class="display-6 fw-bold text-success">
                            <i class="fas fa-video me-3"></i>
                            Smart Video Summarizer
                        </h2>
                        <p class="text-muted">Transform videos, audio, and text into intelligent summaries</p>
                    </div>
                    <button class="btn btn-outline-secondary btn-lg rounded-pill" onclick="showDashboard()">
                        <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                    </button>
                </div>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-xl-10">
                    <div class="card border-0 shadow-lg animate__animated animate__zoomIn">
                        <div class="card-header bg-success text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0"><i class="fas fa-magic me-2"></i>StudyByte Content Processor</h5>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-light btn-sm" id="text-tab" onclick="switchSummarizerTab('text')">
                                        <i class="fas fa-file-text me-1"></i>Text
                                    </button>
                                    <button type="button" class="btn btn-success btn-sm" id="video-tab" onclick="switchSummarizerTab('video')">
                                        <i class="fas fa-video me-1"></i>Video/Audio
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            
                            <!-- Text Input Tab -->
                            <div id="text-input-section" style="display: none;">
                                <div class="mb-4">
                                    <label class="form-label fw-semibold">
                                        <i class="fas fa-edit text-success me-2"></i>
                                        Paste your content here:
                                    </label>
                                    <textarea id="text-input" 
                                             class="form-control form-control-lg" 
                                             rows="8" 
                                             placeholder="Paste your class notes, meeting transcripts, or any text you'd like to summarize..."></textarea>
                                </div>
                                <div class="text-center mb-4">
                                    <button class="btn btn-success btn-lg px-5 rounded-pill" onclick="summarizeText()">
                                        <i class="fas fa-magic me-2"></i>Generate Smart Summary
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Video/Audio Upload Tab -->
                            <div id="video-input-section">
                                <div class="mb-4">
                                    <label class="form-label fw-semibold">
                                        <i class="fas fa-upload text-success me-2"></i>
                                        Upload Video or Audio File:
                                    </label>
                                    <div class="upload-zone" id="video-upload-zone" onclick="document.getElementById('video-file-input').click()">
                                        <div class="text-center p-5">
                                            <i class="fas fa-cloud-upload-alt fa-3x text-success mb-3"></i>
                                            <h5>Click to upload or drag & drop</h5>
                                            <p class="text-muted mb-2">
                                                Supported: MP4, AVI, MOV, MP3, WAV, M4A
                                            </p>
                                            <small class="text-muted">Max file size: 200MB</small>
                                        </div>
                                        <input type="file" id="video-file-input" style="display: none;" 
                                               accept="video/*,audio/*,.mp4,.avi,.mov,.mkv,.flv,.wmv,.webm,.m4v,.mp3,.wav,.m4a,.flac,.aac"
                                               onchange="handleVideoFile(this)">
                                    </div>
                                    <div id="file-info" class="mt-3" style="display: none;">
                                        <div class="alert alert-info">
                                            <i class="fas fa-file me-2"></i>
                                            <strong>Selected:</strong> <span id="file-name"></span>
                                            <span class="float-end">
                                                <span id="file-size"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center mb-4">
                                    <button class="btn btn-success btn-lg px-5 rounded-pill" id="process-video-btn" onclick="processVideo()" disabled>
                                        <i class="fas fa-play me-2"></i>Process Video & Generate Summary
                                    </button>
                                </div>
                                <div id="processing-status" class="text-center" style="display: none;">
                                    <div class="spinner-border text-success me-2" role="status"></div>
                                    <span>Processing video... This may take a few minutes.</span>
                                </div>
                            </div>
                            
                            <div id="summary-result" class="summary-output" style="display: none;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PDF Processor Section -->
    <div id="pdf-processor" class="feature-section">
        <div class="container-fluid py-4">
            <div class="section-header">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2 class="display-6 fw-bold text-warning">
                            <i class="fas fa-magic me-3"></i>
                            Smart Text Summarizer
                        </h2>
                        <p class="text-muted">Transform any text into structured study notes</p>
                    </div>
                    <button class="btn btn-outline-secondary btn-lg rounded-pill" onclick="showDashboard()">
                        <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                    </button>
                </div>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-xl-10">
                    <div class="card border-0 shadow-lg">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="mb-0"><i class="fas fa-edit me-2"></i>Text Intelligence Processor</h5>
                        </div>
                        <div class="card-body p-4">
                            <div class="mb-4">
                                <label for="main-text-input" class="form-label fw-bold">
                                    <i class="fas fa-file-text me-2"></i>Enter Your Text
                                </label>
                                <textarea 
                                    id="main-text-input" 
                                    class="form-control" 
                                    rows="8" 
                                    placeholder="Paste your text here... (lecture notes, articles, study materials, etc.)"
                                    style="resize: vertical; min-height: 200px; font-size: 14px; line-height: 1.6;"
                                ></textarea>
                                <div class="form-text">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Supports lecture notes, research papers, articles, and any educational content
                                    </small>
                                </div>
                            </div>
                            <div class="text-center mb-4">
                                <button class="btn btn-warning btn-lg px-5 rounded-pill" onclick="processText()">
                                    <i class="fas fa-magic me-2"></i>Generate Smart Notes
                                </button>
                            </div>
                            <div id="text-result" class="text-output" style="display: none;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-3 mt-auto">
        <div class="container text-center">
            <div class="row">
                <div class="col-12">
                    <p class="mb-0">&copy; 2025 StudyByte - AI-Powered Learning Assistant</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-primary">Processing your request...</p>
        </div>
    </div>
</body>
</html>